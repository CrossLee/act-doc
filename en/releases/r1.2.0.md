# What's New in 1.2.0

<a id="i136"></a>
#### `@With` annotation now works on specific method

Before r1.2.0 `@With` can used to introduce an interceptor to a class, e.g.

```java
public class MyInterceptor extends Controller.Util {
    @Before
    public void logRequest(H.Request req) {
        Act.LOGGER.trace("<<< req to %s", req.fullUrl());
    }
}
```

```java
@With(MyInterceptor.class)
public class MyController {
    ...
}
```

The above code says requests to any action handler in `MyController` will get logged. Now r1.2.0 `@With` can be used on specific action handler method, e.g.

```java
public class MyControllerV2 {
   @With(MyInterceptor.class)
   @GetAction("/foo")
   public void handlerNeedsAuditing() {
      ...
   }
   
   @GetAction("/bar")
   public void handlerWithoutAuditing() {
      ...
   }
}
```

The above code in `MyControllerV2` shows any GET request to `/foo` will be traced while GET request to `/bar` won't.

<a id="i152"></a>
#### Allow annotation based interceptor class to be registered as global interceptor

Previously if you want to apply an interceptor, e.g. the `MyInterceptor` as we talked above, you must use `@With` annotation to apply the interceptor to the controller class. Now in r1.2.0 we have introduced `@Global` annotation so that you can specify an interceptor class to globally apply to all controller action handlers:

```java
@Global 
public class MyInterceptor extends Controller.Util {
    @Before
    public void logRequest(H.Request req) {
        Act.LOGGER.trace("<<< req to %s", req.fullUrl());
    }
    
    @After
    public void logRequestDone(H.Request req) {
        Act.LOGGER.trace(">>> req to %s", req.fullUrl());
    }
}
```

The above code says it will log URL before and after req handling for all action handlers

Or you can use `@Global` on specific interceptor method so that only that method will be applied globally:

```java
public class MyInterceptor extends Controller.Util {
    @Global
    @Before
    public void logRequest(H.Request req) {
        Act.LOGGER.trace("<<< req to %s", req.fullUrl());
    }
    
    @After
    public void logRequestDone(H.Request req) {
        Act.LOGGER.trace(">>> req to %s", req.fullUrl());
    }
}
```

The above code says it will log URL only before req handler for all action handlers. The `@After` interceptor will not be applied automatically unless the controller class or action handler method has annotation `@With(MyInterceptor.class)`

